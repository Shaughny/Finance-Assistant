{"ast":null,"code":"import _toConsumableArray from\"/home/mark/Documents/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/mark/Documents/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mark/Documents/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mark/Documents/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from'react';import{v4 as uuidv4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";export var DataContext=/*#__PURE__*/createContext();export var DataContextProvider=function DataContextProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,dataAsJSON;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/transactions\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:dataAsJSON=_context.sent;setData(dataAsJSON);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getData(){return _ref2.apply(this,arguments);};}();useEffect(function(){getData();},[data.length]);var addExpense=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type,total){var body,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;body={type:type,amount:total,isIncome:false,uuid:uuidv4()};_context2.next=4;return fetch(\"/transactions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});case 4:response=_context2.sent;setData([].concat(_toConsumableArray(data),[{type:body.type,total:body.amount,isincome:false,uuid:body.uuid}]));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function addExpense(_x,_x2){return _ref3.apply(this,arguments);};}();var addIncome=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(type,total){var body,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;body={type:type,amount:total,isIncome:true,uuid:uuidv4()};_context3.next=4;return fetch(\"/transactions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});case 4:response=_context3.sent;console.log(response);setData([].concat(_toConsumableArray(data),[{type:body.type,total:body.amount,isincome:true,uuid:body.uuid}]));_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function addIncome(_x3,_x4){return _ref4.apply(this,arguments);};}();var deleteData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(uuid){var deleteTrans,temp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"/transactions/\".concat(uuid),{method:\"DELETE\"});case 3:deleteTrans=_context4.sent;console.log(deleteTrans);_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0.message);case 10:temp=data.filter(function(e){return e.uuid!==uuid;});setData(temp);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function deleteData(_x5){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(DataContext.Provider,{value:{data:data,addExpense:addExpense,addIncome:addIncome,deleteData:deleteData},children:children});};export default DataContextProvider;","map":{"version":3,"sources":["/home/mark/Documents/FinanceAssistant/client/src/contexts/DataContext.js"],"names":["React","createContext","useState","useEffect","v4","uuidv4","DataContext","DataContextProvider","children","data","setData","getData","fetch","response","json","dataAsJSON","console","log","message","length","addExpense","type","total","body","amount","isIncome","uuid","method","headers","JSON","stringify","isincome","addIncome","deleteData","deleteTrans","temp","filter","e"],"mappings":"ipBAAA,MAAOA,CAAAA,KAAP,EAAcC,aAAd,CAA6BC,QAA7B,CAAuCC,SAAvC,KAAuD,OAAvD,CACA,OAAQC,EAAE,GAAIC,CAAAA,MAAd,KAA2B,MAA3B,C,2CAIA,MAAO,IAAMC,CAAAA,WAAW,cAAGL,aAAa,EAAjC,CAEP,MAAO,IAAMM,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAE/C,cAAuBN,QAAQ,CAAC,EAAD,CAA/B,wCAAMO,IAAN,eAAYC,OAAZ,eAGA,GAAMC,CAAAA,OAAO,2FAAG,iMAGeC,CAAAA,KAAK,CAAC,eAAD,CAHpB,QAGFC,QAHE,qCAIiBA,CAAAA,QAAQ,CAACC,IAAT,EAJjB,QAIFC,UAJE,eAMRL,OAAO,CAACK,UAAD,CAAP,CANQ,iFAQRC,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB,EARQ,qEAAH,kBAAPP,CAAAA,OAAO,2CAAb,CAaAR,SAAS,CAAC,UAAM,CACZQ,OAAO,GACV,CAFQ,CAEP,CAACF,IAAI,CAACU,MAAN,CAFO,CAAT,CAQA,GAAMC,CAAAA,UAAU,2FAAG,kBAAMC,IAAN,CAAWC,KAAX,yJAGLC,IAHK,CAGE,CACTF,IAAI,CAACA,IADI,CAETG,MAAM,CAACF,KAFE,CAGTG,QAAQ,CAAE,KAHD,CAITC,IAAI,CAAErB,MAAM,EAJH,CAHF,wBAUYO,CAAAA,KAAK,CAAC,eAAD,CAAiB,CACzCe,MAAM,CAAC,MADkC,CAEzCC,OAAO,CAAC,CAAC,eAAgB,kBAAjB,CAFiC,CAGzCL,IAAI,CAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAHmC,CAAjB,CAVjB,QAULV,QAVK,gBAeXH,OAAO,8BAAKD,IAAL,GAAU,CAACY,IAAI,CAACE,IAAI,CAACF,IAAX,CAAgBC,KAAK,CAACC,IAAI,CAACC,MAA3B,CAAkCO,QAAQ,CAAC,KAA3C,CAAiDL,IAAI,CAACH,IAAI,CAACG,IAA3D,CAAV,GAAP,CAfW,mFAiBXV,OAAO,CAACC,GAAR,CAAY,aAAMC,OAAlB,EAjBW,sEAAH,kBAAVE,CAAAA,UAAU,iDAAhB,CAoBA,GAAMY,CAAAA,SAAS,2FAAG,kBAAOX,IAAP,CAAYC,KAAZ,yJAIJC,IAJI,CAIG,CACTF,IAAI,CAACA,IADI,CAETG,MAAM,CAACF,KAFE,CAGTG,QAAQ,CAAE,IAHD,CAITC,IAAI,CAAErB,MAAM,EAJH,CAJH,wBAWaO,CAAAA,KAAK,CAAC,eAAD,CAAiB,CACzCe,MAAM,CAAC,MADkC,CAEzCC,OAAO,CAAC,CAAC,eAAgB,kBAAjB,CAFiC,CAGzCL,IAAI,CAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAHmC,CAAjB,CAXlB,QAWJV,QAXI,gBAgBVG,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EACAH,OAAO,8BAAKD,IAAL,GAAU,CAACY,IAAI,CAACE,IAAI,CAACF,IAAX,CAAgBC,KAAK,CAACC,IAAI,CAACC,MAA3B,CAAkCO,QAAQ,CAAC,IAA3C,CAAgDL,IAAI,CAACH,IAAI,CAACG,IAA1D,CAAV,GAAP,CAjBU,mFAmBVV,OAAO,CAACC,GAAR,CAAY,aAAMC,OAAlB,EAnBU,sEAAH,kBAATc,CAAAA,SAAS,kDAAf,CAuBA,GAAMC,CAAAA,UAAU,2FAAG,kBAAMP,IAAN,mLAIed,CAAAA,KAAK,yBAAkBc,IAAlB,EAAyB,CACpDC,MAAM,CAAC,QAD6C,CAAzB,CAJpB,QAILO,WAJK,gBAQXlB,OAAO,CAACC,GAAR,CAAYiB,WAAZ,EARW,mFAUXlB,OAAO,CAACC,GAAR,CAAY,aAAMC,OAAlB,EAVW,QAYTiB,IAZS,CAYF1B,IAAI,CAAC2B,MAAL,CAAY,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACX,IAAF,GAAWA,IAAf,EAAb,CAZE,CAafhB,OAAO,CAACyB,IAAD,CAAP,CAbe,sEAAH,kBAAVF,CAAAA,UAAU,8CAAhB,CAiBA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAACxB,IAAI,CAAJA,IAAD,CAAMW,UAAU,CAAVA,UAAN,CAAiBY,SAAS,CAATA,SAAjB,CAA2BC,UAAU,CAAVA,UAA3B,CAA7B,UACKzB,QADL,EADJ,CAKH,CA3FM,CA6FP,cAAeD,CAAAA,mBAAf","sourcesContent":["import React,{createContext, useState, useEffect} from 'react'\nimport {v4 as uuidv4} from 'uuid';\n\n\n\nexport const DataContext = createContext();\n\nexport const DataContextProvider = ({children}) => {\n    \n    const[data, setData] = useState([\n    \n    ])\n    const getData = async() => {\n        try {\n            \n            const response = await fetch(\"/transactions\");\n            const dataAsJSON = await response.json();\n\n            setData(dataAsJSON);\n        } catch (error) {\n            console.log(error.message);\n        }\n\n    }\n    \n    useEffect(() => {\n        getData();\n    },[data.length]);\n\n\n\n\n\n    const addExpense = async(type,total) =>{\n        try {\n\n            const body = {\n                type:type,\n                amount:total,\n                isIncome: false,\n                uuid: uuidv4()\n            }\n\n            const response = await fetch(\"/transactions\",{\n                method:\"POST\",\n                headers:{\"Content-Type\": \"application/json\"},\n                body: JSON.stringify(body)\n            });\n            setData([...data,{type:body.type,total:body.amount,isincome:false,uuid:body.uuid}])\n        } catch (error) {\n            console.log(error.message)\n        }\n    }\n    const addIncome = async (type,total) =>{\n\n        try {\n\n            const body = {\n                type:type,\n                amount:total,\n                isIncome: true,\n                uuid: uuidv4()\n            }\n\n            const response = await fetch(\"/transactions\",{\n                method:\"POST\",\n                headers:{\"Content-Type\": \"application/json\"},\n                body: JSON.stringify(body)\n            });\n            console.log(response);\n            setData([...data,{type:body.type,total:body.amount,isincome:true,uuid:body.uuid}])\n        } catch (error) {\n            console.log(error.message)\n        }\n\n    }\n    const deleteData = async(uuid) =>{\n\n        try {\n            \n            const deleteTrans = await fetch(`/transactions/${uuid}`,{\n                method:\"DELETE\"\n            });\n\n            console.log(deleteTrans);\n        } catch (error) {\n            console.log(error.message);\n        }\n        const temp = data.filter(e => e.uuid !== uuid)\n        setData(temp);\n    }\n\n\n    return (\n        <DataContext.Provider value={{data,addExpense,addIncome,deleteData}}>\n            {children}\n        </DataContext.Provider>\n    )\n}\n\nexport default DataContextProvider;"]},"metadata":{},"sourceType":"module"}