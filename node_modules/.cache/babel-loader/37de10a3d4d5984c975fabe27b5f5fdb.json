{"ast":null,"code":"import _toConsumableArray from\"/home/mark/Documents/Projects/personalfinance testing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/mark/Documents/Projects/personalfinance testing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mark/Documents/Projects/personalfinance testing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mark/Documents/Projects/personalfinance testing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from'react';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";export var StockContext=/*#__PURE__*/createContext();var axiosInstance=axios.create({baseURL:'https://www.alphavantage.co/query'});toast.configure();export var StockContextProvider=function StockContextProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),investments=_useState2[0],setInvestments=_useState2[1];var notify=function notify(){toast.error(\"Couldn't locate a stock with that symbol!\");};var getStockQuote=function getStockQuote(symbol){return axiosInstance.get('',{params:{function:'GLOBAL_QUOTE',symbol:symbol,apikey:'3H68FKF113QNYK6X'}});};var fetchStockData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(symbol,shares){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{axios.get('https://pers-finance.herokuapp.com/stocks/get').then(function(response){setInvestments(response.data);});}catch(error){console.log(error.message);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function fetchStockData(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchStockData();},[]);var deleteStock=function deleteStock(symbol){axios.delete(\"https://pers-finance.herokuapp.com/stocks/delete/\".concat(symbol)).then(function(){fetchStockData();});var temp=investments.filter(function(e){return e.symbol!==symbol;});setInvestments(temp);};var addStock=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(symbol,shares){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getStockQuote(symbol.toUpperCase());case 2:result=_context2.sent;console.log(result.data['Global Quote']);if(result.data['Global Quote'][\"01. symbol\"]===undefined){notify();}else{try{axios.post('https://pers-finance.herokuapp.com/stocks/insert',{symbol:result.data['Global Quote']['01. symbol'],price:result.data['Global Quote']['05. price'],shares:shares}).then(function(){});setInvestments([].concat(_toConsumableArray(investments),[{symbol:result.data['Global Quote']['01. symbol'],price:result.data['Global Quote']['05. price'],shares:shares}]));}catch(e){console.log(e.message);}}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function addStock(_x3,_x4){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(StockContext.Provider,{value:{investments:investments,getStockQuote:getStockQuote,deleteStock:deleteStock,addStock:addStock},children:children});};export default StockContextProvider;","map":{"version":3,"sources":["/home/mark/Documents/Projects/personalfinance testing/client/src/contexts/PortfolioContext.js"],"names":["React","createContext","useState","useEffect","axios","toast","StockContext","axiosInstance","create","baseURL","configure","StockContextProvider","children","investments","setInvestments","notify","error","getStockQuote","symbol","get","params","function","apikey","fetchStockData","shares","then","response","data","console","log","message","deleteStock","delete","temp","filter","e","addStock","toUpperCase","result","undefined","post","price"],"mappings":"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","sourcesContent":["import React,{createContext, useState, useEffect} from 'react'\nimport axios from 'axios';\nimport {toast} from 'react-toastify';\nexport const StockContext = createContext();\n\n\nconst axiosInstance = axios.create({\n    baseURL: 'https://www.alphavantage.co/query'\n});\n\ntoast.configure();\n\nexport const StockContextProvider = ({children})=>{\n\n\n    const[investments, setInvestments] = useState([\n        \n        \n    ])\n\n    const notify = () =>{\n        toast.error(\"Couldn't locate a stock with that symbol!\");\n    }\n\n\n    const getStockQuote = (symbol) =>{\n        return axiosInstance.get('',{\n        params:{\n            function: 'GLOBAL_QUOTE',\n            symbol,\n            apikey: '3H68FKF113QNYK6X'\n        }\n    })\n    }\n\n        const fetchStockData = async(symbol,shares) =>{\n\n            try {\n           \n                axios.get('https://pers-finance.herokuapp.com/stocks/get').then((response) =>{\n                setInvestments(response.data)\n                })\n            \n        } catch (error) {\n            console.log(error.message);\n        }\n        }\n\n\n    useEffect(()=>{\n        fetchStockData();\n    },[])\n\n    const deleteStock = (symbol) =>{\n         \n         axios.delete(`https://pers-finance.herokuapp.com/stocks/delete/${symbol}`).then(()=>{\n                    fetchStockData();\n                 })\n        const temp = investments.filter(e => e.symbol!== symbol);\n            setInvestments(temp);\n    }\n\n    const addStock = async(symbol,shares) =>{\n        const result = await getStockQuote(symbol.toUpperCase());\n\n        console.log((result.data['Global Quote']));\n       \n        if(result.data['Global Quote'][`01. symbol`] === undefined){\n            notify();\n       }\n       else{\n\n        try {\n\n            axios.post('https://pers-finance.herokuapp.com/stocks/insert',\n            {symbol:result.data['Global Quote']['01. symbol'],\n            price:result.data['Global Quote']['05. price'],\n            shares:shares\n            }).then(()=>{\n               \n            })\n\n            setInvestments([...investments,{symbol: result.data['Global Quote']['01. symbol'],price: result.data['Global Quote']['05. price'],shares:shares}]);\n        } \n        catch(e){\n           console.log(e.message) \n        } \n        \n       }   \n    }\n\n\n\n    \n    return (\n        <StockContext.Provider value={{investments,getStockQuote,deleteStock,addStock}}>\n            {children}\n        </StockContext.Provider>\n    )\n\n}\nexport default StockContextProvider;    "]},"metadata":{},"sourceType":"module"}