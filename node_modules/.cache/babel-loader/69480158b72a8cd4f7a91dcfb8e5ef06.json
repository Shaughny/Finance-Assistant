{"ast":null,"code":"var _jsxFileName = \"/home/mark/Documents/Personal/Projects2021/personalFinance/FinanceAssistant/personalfinanceClientSide/Finance-Assistant/src/contexts/PortfolioContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StockContext = /*#__PURE__*/createContext();\nconst axiosInstance = axios.create({\n  baseURL: 'https://www.alphavantage.co/query'\n});\ntoast.configure();\nexport const StockContextProvider = ({\n  children\n}) => {\n  _s();\n\n  const [investments, setInvestments] = useState([]);\n\n  const notify = () => {\n    toast.error(\"Couldn't locate a stock with that symbol!\");\n  };\n\n  const getStockQuote = symbol => {\n    return axiosInstance.get('', {\n      params: {\n        function: 'GLOBAL_QUOTE',\n        symbol,\n        apikey: '3H68FKF113QNYK6X'\n      }\n    });\n  };\n\n  const fetchStockData = async (symbol, shares) => {\n    try {\n      axios.get('https://pers-finance.herokuapp.com/stocks/get').then(response => {\n        console.log(response.data);\n        setInvestments(response.data);\n      });\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchStockData();\n  }, []);\n\n  const deleteStock = symbol => {\n    axios.delete(`https://pers-finance.herokuapp.com/stocks/delete/${symbol}`).then(() => {\n      fetchStockData();\n    });\n    const temp = investments.filter(e => e.symbol !== symbol);\n    setInvestments(temp);\n  };\n\n  const addStock = async (symbol, shares) => {\n    const result = await getStockQuote(symbol.toUpperCase());\n    console.log(result.data['Global Quote']);\n\n    if (result.data['Global Quote'][`01. symbol`] === undefined) {\n      notify();\n    } else {\n      try {\n        axios.post('https://pers-finance.herokuapp.com/stocks/insert', {\n          symbol: result.data['Global Quote']['01. symbol'],\n          price: result.data['Global Quote']['05. price'],\n          shares: shares\n        }).then(() => {});\n        setInvestments([...investments, {\n          symbol: result.data['Global Quote']['01. symbol'],\n          price: result.data['Global Quote']['05. price'],\n          shares: shares\n        }]);\n      } catch (e) {\n        console.log(e.message);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(StockContext.Provider, {\n    value: {\n      investments,\n      getStockQuote,\n      deleteStock,\n      addStock\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n};\n\n_s(StockContextProvider, \"Eq4+OR+7GnyU47niO/j/yTi9e+U=\");\n\n_c = StockContextProvider;\nexport default StockContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StockContextProvider\");","map":{"version":3,"sources":["/home/mark/Documents/Personal/Projects2021/personalFinance/FinanceAssistant/personalfinanceClientSide/Finance-Assistant/src/contexts/PortfolioContext.js"],"names":["React","createContext","useState","useEffect","axios","toast","StockContext","axiosInstance","create","baseURL","configure","StockContextProvider","children","investments","setInvestments","notify","error","getStockQuote","symbol","get","params","function","apikey","fetchStockData","shares","then","response","console","log","data","message","deleteStock","delete","temp","filter","e","addStock","result","toUpperCase","undefined","post","price"],"mappings":"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","sourcesContent":["import React,{createContext, useState, useEffect} from 'react'\nimport axios from 'axios';\nimport {toast} from 'react-toastify';\nexport const StockContext = createContext();\n\n\nconst axiosInstance = axios.create({\n    baseURL: 'https://www.alphavantage.co/query'\n});\n\ntoast.configure();\n\nexport const StockContextProvider = ({children})=>{\n\n\n    const[investments, setInvestments] = useState([\n        \n        \n    ])\n\n    const notify = () =>{\n        toast.error(\"Couldn't locate a stock with that symbol!\");\n    }\n\n\n    const getStockQuote = (symbol) =>{\n        return axiosInstance.get('',{\n        params:{\n            function: 'GLOBAL_QUOTE',\n            symbol,\n            apikey: '3H68FKF113QNYK6X'\n        }\n    })\n    }\n\n        const fetchStockData = async(symbol,shares) =>{\n\n            try {\n           \n                axios.get('https://pers-finance.herokuapp.com/stocks/get').then((response) =>{\n                    console.log(response.data)\n                setInvestments(response.data)\n                })\n            \n        } catch (error) {\n            console.log(error.message);\n        }\n        }\n\n\n    useEffect(()=>{\n        fetchStockData();\n    },[])\n\n    const deleteStock = (symbol) =>{\n         \n         axios.delete(`https://pers-finance.herokuapp.com/stocks/delete/${symbol}`).then(()=>{\n                    fetchStockData();\n                 })\n        const temp = investments.filter(e => e.symbol!== symbol);\n            setInvestments(temp);\n    }\n\n    const addStock = async(symbol,shares) =>{\n        const result = await getStockQuote(symbol.toUpperCase());\n\n        console.log((result.data['Global Quote']));\n       \n        if(result.data['Global Quote'][`01. symbol`] === undefined){\n            notify();\n       }\n       else{\n\n        try {\n\n            axios.post('https://pers-finance.herokuapp.com/stocks/insert',\n            {symbol:result.data['Global Quote']['01. symbol'],\n            price:result.data['Global Quote']['05. price'],\n            shares:shares\n            }).then(()=>{\n               \n            })\n\n            setInvestments([...investments,{symbol: result.data['Global Quote']['01. symbol'],price: result.data['Global Quote']['05. price'],shares:shares}]);\n        } \n        catch(e){\n           console.log(e.message) \n        } \n        \n       }   \n    }\n\n\n\n    \n    return (\n        <StockContext.Provider value={{investments,getStockQuote,deleteStock,addStock}}>\n            {children}\n        </StockContext.Provider>\n    )\n\n}\nexport default StockContextProvider;    "]},"metadata":{},"sourceType":"module"}