{"ast":null,"code":"import _toConsumableArray from\"/home/mark/Documents/Projects/personalFinance/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/mark/Documents/Projects/personalFinance/FinanceAssistant/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from'react';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export var DataContext=/*#__PURE__*/createContext();export var DataContextProvider=function DataContextProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var getData=function getData(){try{Axios.get('https://pers-finance.herokuapp.com/trans/get').then(function(response){setData(response.data);});}catch(error){console.log(error.message);}};useEffect(function(){getData();},[]);var addExpense=function addExpense(type,total){try{Axios.post('https://pers-finance.herokuapp.com/trans/insert',{type:type,total:total,isincome:false}).then(function(){});setData([].concat(_toConsumableArray(data),[{type:type,total:total,isincome:false,trans_id:null}]));}catch(e){console.log(e.message);}};var addIncome=function addIncome(type,total){try{Axios.post('https://pers-finance.herokuapp.com//trans/insert',{type:type,total:total,isincome:true}).then(function(){});setData([].concat(_toConsumableArray(data),[{type:type,total:total,isincome:true,trans_id:null}]));}catch(e){console.log(e.message);}};var deleteData=function deleteData(trans){if(trans.trans_id==null){Axios.delete(\"https://pers-finance.herokuapp.com/trans/delete/\".concat(trans.type)).then(function(){getData();});var temp=data.filter(function(e){return e.type!==trans.type&&e.total!==trans.total;});setData(temp);}else{var trans_id=trans.trans_id;Axios.delete(\"https://pers-finance.herokuapp.com/trans/delete/\".concat(trans_id)).then(function(){getData();});var _temp=data.filter(function(e){return e.trans_id!==trans_id;});setData(_temp);}};return/*#__PURE__*/_jsx(DataContext.Provider,{value:{data:data,addExpense:addExpense,addIncome:addIncome,deleteData:deleteData},children:children});};export default DataContextProvider;","map":{"version":3,"sources":["/home/mark/Documents/Projects/personalFinance/FinanceAssistant/client/src/contexts/DataContext.js"],"names":["React","createContext","useState","useEffect","Axios","DataContext","DataContextProvider","children","data","setData","getData","get","then","response","error","console","log","message","addExpense","type","total","post","isincome","trans_id","e","addIncome","deleteData","trans","delete","temp","filter"],"mappings":"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","sourcesContent":["import React,{createContext, useState, useEffect} from 'react'\nimport Axios from 'axios';\n\n\nexport const DataContext = createContext();\n\nexport const DataContextProvider = ({children}) => {\n    \n    const[data, setData] = useState([\n    \n    ])\n    const getData =() => {\n        try {\n           \n                Axios.get('https://pers-finance.herokuapp.com/trans/get').then((response) =>{\n                setData(response.data)\n                })\n            \n        } catch (error) {\n            console.log(error.message);\n        }\n\n    }\n\n     useEffect(() => {\n        getData();\n    },[]);\n\nconst addExpense = (type,total) =>{\n        try {\n\n            Axios.post('https://pers-finance.herokuapp.com/trans/insert',\n            {type:type,\n            total:total,\n            isincome:false\n            }).then(()=>{\n               \n            })\n         setData([...data,{type:type,total:total,isincome:false,trans_id:null}])\n            \n        } \n        catch(e){\n           console.log(e.message) \n        }\n    }\n    \n\n    const addIncome = (type,total) =>{\n\n        try {\n\n            Axios.post('https://pers-finance.herokuapp.com//trans/insert',\n            {type:type,\n            total:total,\n            isincome:true\n            }).then(()=>{\n               \n            })\n             setData([...data,{type:type,total:total,isincome:true,trans_id:null}])\n        } \n        catch(e){\n           console.log(e.message) \n        }\n\n    }\n    const deleteData = (trans) =>{\n       \n        if(trans.trans_id == null){\n\n            Axios.delete(`https://pers-finance.herokuapp.com/trans/delete/${trans.type}`).then(()=>{\n                getData();\n            })\n            \n            const temp = data.filter(e => e.type !== trans.type && e.total !== trans.total);\n            setData(temp);\n         }\n         else{\n                const trans_id = trans.trans_id;\n                        \n                Axios.delete(`https://pers-finance.herokuapp.com/trans/delete/${trans_id}`).then(()=>{\n                    getData();\n                 })\n         const temp = data.filter(e => e.trans_id !== trans_id);\n            setData(temp);\n         }\n\n       \n    }\n\n\n\n\n\n   \n\n\n\n\n\n    \n\n\n    return (\n        <DataContext.Provider value={{data,addExpense,addIncome,deleteData}}>\n            {children}\n        </DataContext.Provider>\n    )\n}\n\nexport default DataContextProvider;"]},"metadata":{},"sourceType":"module"}